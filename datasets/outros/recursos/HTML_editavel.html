ai2html-js

<script type="text/javascript">
	
			 var url = window.location.href;
			if(url.indexOf('https://s3-sa-east-1.amazonaws.com') > -1){
				 var xhttp = new XMLHttpRequest();
				xhttp.open("GET",url , true);
			    xhttp.setRequestHeader("Content-type", "text/html;charset='UTF-8'");
			    
		        xhttp.onreadystatechange = function() {
		          if (xhttp.readyState == 4 && xhttp.status == 200) {
							             
		               document.body.innerHTML = xhttp.responseText;
	
		                var _url = window.location.href.split('nexojornal/')[1];
			    		var btn = document.querySelector('#enviar_grafico');
			    
					    if(!btn){
						    btn = document.createElement('button');
						    btn.setAttribute('id', 'enviar_grafico');
						    btn.innerHTML = "enviar";
						    document.body.appendChild(btn);
						}
	
						var paragrafs = document.querySelectorAll("p");
					    for(var i=0; i<paragrafs.length; i++){
					        paragrafs[i].addEventListener("dblclick", function(){
					          var _self = this;
					          var oldVal = _self.innerHTML;
				              var div = document.createElement("div");
				              div.style.zIndex = "999";
				              div.style.position = "absolute";
				              div.innerHTML = "<textarea style='display:block;width:200px;height:80px;background:#e6e4e4'></textarea><button>OK</button>"
				              div.querySelector("textarea").value = this.innerHTML;
				              _self.appendChild(div);
				 			
				              div.querySelector("button").addEventListener("click", function(){
				                 var inputValue = div.querySelector("textarea").value;
				              	if(oldVal != inputValue){
				              		_self.innerHTML = inputValue;
				              	_self.style.backgroundColor = "#fbed76";
				              	}else{
				              		div.remove();
				              	}
				              	
				              
				              })
				       		 })
			    		}
	
	
					    btn.addEventListener("click", function(){    
					        var arquivo = document.body.innerHTML;
					        var xhttp2 = new XMLHttpRequest();
					        xhttp2.onreadystatechange = function() {
					          if (xhttp2.readyState == 4 && xhttp2.status == 200) {
					                alert("Gr√É&iexcl;fico atualizado com sucesso.");
					                window.location.reload(true);
					            }
					        };
					
						    xhttp2.open("POST", "https://rest.nexojornal.com.br/graficos_homolog/v1/update", true);
						    xhttp2.setRequestHeader("Content-type", "application/json");
						    var data = {arquivo : arquivo,
						                path : _url
						                }
						    xhttp2.send(JSON.stringify(data));
					    });
		            }
		        };
	
			    xhttp.send();
	
			}
			    
			</script>